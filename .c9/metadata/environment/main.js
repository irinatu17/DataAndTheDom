{"filter":false,"title":"main.js","tooltip":"/main.js","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":19,"column":1},"action":"insert","lines":["const baseURL = \"https://swapi.co/api/\";","","function getData(type, cb) {","    var xhr = new XMLHttpRequest();","","    xhr.onreadystatechange = function() {","        if (this.readyState == 4 && this.status == 200) {","            cb(JSON.parse(this.responseText));","        }","    };","","    xhr.open(\"GET\", baseURL + type + \"/\");","    xhr.send();","}","","function writeToDocument(type) {","    getData(type, function(data) {","        document.getElementById(\"data\").innerHTML = data;","    });","}"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":19,"column":1},"action":"remove","lines":["const baseURL = \"https://swapi.co/api/\";","","function getData(type, cb) {","    var xhr = new XMLHttpRequest();","","    xhr.onreadystatechange = function() {","        if (this.readyState == 4 && this.status == 200) {","            cb(JSON.parse(this.responseText));","        }","    };","","    xhr.open(\"GET\", baseURL + type + \"/\");","    xhr.send();","}","","function writeToDocument(type) {","    getData(type, function(data) {","        document.getElementById(\"data\").innerHTML = data;","    });","}"],"id":2},{"start":{"row":0,"column":0},"end":{"row":60,"column":1},"action":"insert","lines":["function getData(url, cb) {","    var xhr = new XMLHttpRequest();","","    xhr.onreadystatechange = function() {","        if (this.readyState == 4 && this.status == 200) {","            cb(JSON.parse(this.responseText));","        }","    };","","    xhr.open(\"GET\", url);","    xhr.send();","}","","function getTableHeaders(obj) {","    var tableHeaders = [];","","    Object.keys(obj).forEach(function(key) {","        tableHeaders.push(`<td>${key}</td>`);","    });","","    return `<tr>${tableHeaders}</tr>`;","}","","function generatePaginationButtons(next, prev) {","    if (next && prev) {","        return `<button onclick=\"writeToDocument('${prev}')\">Previous</button>","                <button onclick=\"writeToDocument('${next}')\">Next</button>`;","    } else if (next && !prev) {","        return `<button onclick=\"writeToDocument('${next}')\">Next</button>`;","    } else if (!next && prev) {","        return `<button onclick=\"writeToDocument('${prev}')\">Previous</button>`;","    }","}","","function writeToDocument(url) {","    var tableRows = [];","    var el = document.getElementById(\"data\");","","    getData(url, function(data) {","        var pagination = \"\";","","        if (data.next || data.previous) {","            pagination = generatePaginationButtons(data.next, data.previous);","        }","        data = data.results;","        var tableHeaders = getTableHeaders(data[0]);","","        data.forEach(function(item) {","            var dataRow = [];","","            Object.keys(item).forEach(function(key) {","                var rowData = item[key].toString();","                var truncatedData = rowData.substring(0, 15);","                dataRow.push(`<td>${truncatedData}</td>`);","            });","            tableRows.push(`<tr>${dataRow}</tr>`);","        });","","        el.innerHTML = `<table>${tableHeaders}${tableRows}</table>${pagination}`.replace(/,/g, \"\");","    });","}"]}]]},"ace":{"folds":[],"scrolltop":429,"scrollleft":0,"selection":{"start":{"row":58,"column":71},"end":{"row":58,"column":71},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":29,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1571346266526,"hash":"345f8ea450dff6508f98c9b7bfebe2265acaf629"}